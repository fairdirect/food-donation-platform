<?php

/* create postgres connection */
try{
    $postgres = new PDO('pgsql:dbname=epelia;host=localhost', 'xxx', 'xxx');
    $postgres->exec("set names utf8");
} catch(Exception $e){
    exit($e->getMessage());
}

$postgres->exec('DELETE FROM epelia_regions');

/* prepare insert statements */
$regions_query = $postgres->prepare(
    "INSERT INTO epelia_regions(
            id, plz, name, country)
        VALUES(
            ?, ?, ?, ?
        )");

$inserted = 0;

$regions = array(
    array('01000','01944','Sachsen','DE'),
    array('01945','01999','Südost-Brandenburg','DE'),
    array('02000','02999','Sachsen','DE'),
    array('03000','03999','Südost-Brandenburg','DE'),
    array('04000','04599','Sachsen','DE'),
    array('04600','04639','Thüringen','DE'),
    array('04640','04889','Sachsen','DE'),
    array('04890','04999','Südost-Brandenburg','DE'),
    array('06000','06999','Sachsen Anhalt','DE'),
    array('07000','07999','Thüringen','DE'),
    array('08000','09999','Sachsen','DE'),
    array('10000','14399','Berlin','DE'),
    array('14400','14999','Nordwest-Brandenburg','DE'),
    array('15000','15999','Südost-Brandenburg','DE'),
    array('16000','16999','Nordwest-Brandenburg','DE'),
    array('17000','19272','Mecklenburg-Vorpommern','DE'),
    array('19273','19287','Niedersachsen','DE'),
    array('19288','19308','Mecklenburg-Vorpommern','DE'),
    array('19309','19356','Nordwest-Brandenburg','DE'),
    array('19357','19999','Mecklenburg-Vorpommern','DE'),
    array('20000','21038','Hamburg','DE'),
    array('21039','21199','Schleswig-Holstein','DE'),
    array('21200','21449','Niedersachsen','DE'),
    array('21450','21520','Schleswig-Holstein','DE'),
    array('21521','21523','Niedersachsen','DE'),
    array('21524','21529','Schleswig-Holstein','DE'),
    array('21530','21999','Niedersachsen','DE'),
    array('22000','22112','Hamburg','DE'),
    array('22113','23919','Schleswig-Holstein','DE'),
    array('23920','23999','Mecklenburg-Vorpommern','DE'),
    array('24000','25999','Schleswig-Holstein','DE'),
    array('26000','27497','Niedersachsen','DE'),
    array('27498','27498','Schleswig-Holstein','DE'),
    array('27499','27499','Hamburg','DE'),
    array('27500','27599','Bremen','DE'),
    array('27600','27999','Niedersachsen','DE'),
    array('28000','28789','Bremen','DE'),
    array('28790','29399','Niedersachsen','DE'),
    array('29400','29438','Sachsen-Anhalt','DE'),
    array('29439','31999','Niedersachsen','DE'),
    array('32000','33999','Nordrhein-Westfalen','DE'),
    array('34000','34329','Hessen','DE'),
    array('34330','34358','Niedersachsen','DE'),
    array('34359','34399','Hessen','DE'),
    array('34400','34439','Nordrhein-Westfalen','DE'),
    array('34440','34999','Hessen','DE'),
    array('35000','36399','Hessen','DE'),
    array('36400','36999','Thüringen','DE'),
    array('37000','37199','Niedersachsen','DE'),
    array('37200','37216','Hessen','DE'),
    array('37217','37234','Niedersachsen','DE'),
    array('37235','37299','Hessen','DE'),
    array('37300','37399','Thüringen','DE'),
    array('37400','37649','Niedersachsen','DE'),
    array('37650','37690','Nordrhein-Westfalen','DE'),
    array('37691','37695','Niedersachsen','DE'),
    array('37696','37696','Nordrhein-Westfalen','DE'),
    array('37697','38485','Niedersachsen','DE'),
    array('38486','38489','Sachsen-Anhalt','DE'),
    array('38490','38799','Niedersachsen','DE'),
    array('38800','39999','Sachsen-Anhalt','DE'),
    array('40000','48425','Nordrhein-Westfalen','DE'),
    array('48426','48564','Niedersachsen','DE'),
    array('48565','48999','Nordrhein-Westfalen','DE'),
    array('49000','49469','Niedersachsen','DE'),
    array('49470','49550','Nordrhein-Westfalen','DE'),
    array('49551','49999','Niedersachsen','DE'),
    array('50000','51597','Nordrhein-Westfalen','DE'),
    array('51598','51599','Rheinland-Pfalz','DE'),
    array('51600','53399','Nordrhein-Westfalen','DE'),
    array('53400','56999','Rheinland-Pfalz','DE'),
    array('57000','57499','Nordrhein-Westfalen','DE'),
    array('57500','57999','Rheinland-Pfalz','DE'),
    array('58000','59999','Nordrhein-Westfalen','DE'),
    array('60000','63699','Hessen','DE'),
    array('63700','63999','Nordbayern','DE'),
    array('64000','65550','Hessen','DE'),
    array('65551','65588','Rheinland-Pfalz','DE'),
    array('65589','65620','Hessen','DE'),
    array('65621','65626','Rheinland-Pfalz','DE'),
    array('65627','65628','Hessen','DE'),
    array('65629','65718','Rheinland-Pfalz','DE'),
    array('65719','65999','Hessen','DE'),
    array('66000','66999','Saarland','DE'),
    array('67000','67999','Rheinland-Pfalz','DE'),
    array('68000','68518','Baden-Würtemberg','DE'),
    array('68519','68525','Hessen','DE'),
    array('68526','68599','Baden-Würtemberg','DE'),
    array('68600','68699','Hessen','DE'),
    array('68700','69238','Baden-Würtemberg','DE'),
    array('69239','69241','Hessen','DE'),
    array('69242','69482','BadenWürtemberg','DE'),
    array('69483','69492','Hessen','DE'),
    array('69493','69502','Baden-Würtemberg','DE'),
    array('69503','69999','Hessen','DE'),
    array('70000','76699','Baden-Würtemberg','DE'),
    array('76700','76702','Rheinland-Pfalz','DE'),
    array('76703','76725','Baden-Würtemberg','DE'),
    array('76726','76999','Rheinland-Pfalz','DE'),
    array('77000','79999','Baden-Würtemberg','DE'),
    array('80000','87999','Südbayern','DE'),
    array('88000','88099','Baden-Würtemberg','DE'),
    array('88100','88146','Südbayern','DE'),
    array('88147','88148','Baden-Würtemberg','DE'),
    array('88149','88200','Südbayern','DE'),
    array('88201','89199','Baden-Würtemberg','DE'),
    array('89200','89499','Südbayern','DE'),
    array('89500','89999','Baden-Würtemberg','DE'),
    array('90000','96499','Nordbayern','DE'),
    array('96500','96999','Thüringen','DE'),
    array('97000','97870','Nordbayern','DE'),
    array('97871','97879','Baden-Würtemberg','DE'),
    array('97880','97899','Nordbayern','DE'),
    array('97900','97900','Baden-Würtemberg','DE'),
    array('97901','97915','Nordbayern','DE'),
    array('97916','97999','Baden-Würtemberg','DE'),
    array('98000','99999','Thüringen','DE'),
    array('00010','04999','Lazio','IT'),
    array('05000','06999','Umbria','IT'),
    array('07000','09999','Sardinia','IT'),
    array('10000','10999','Piedmont','IT'),
    array('12000','15999','Piedmont','IT'),
    array('28000','28999','Piedmont','IT'),
    array('11000','11999','Aosta Valley','IT'),
    array('16000','19999','Liguria','IT'),
    array('20000','27999','Lombardy','IT'),
    array('46000','46999','Lombardy','IT'),
    array('29000','29999','Emilia-Romagna','IT'),
    array('40000','44999','Emilia-Romagna','IT'),
    array('47000','48999','Emilia-Romagna','IT'),
    array('30000','32999','Veneto','IT'),
    array('35000','37999','Veneto','IT'),
    array('45000','45999','Veneto','IT'),
    array('33000','34999','Friuli-Venezia-Giulia','IT'),
    array('38000','39999','Südtirol','IT'),
    array('50000','59999','Toscana','IT'),
    array('60000','63999','Marche','IT'),
    array('64000','67999','Abruzzo','IT'),
    array('70000','74999','Apulia','IT'),
    array('75000','75999','Basilicata','IT'),
    array('85000','85999','Basilicata','IT'),
    array('80000','84999','Campania','IT'),
    array('86000','86999','Molise','IT'),
    array('87000','89999','Calabria','IT'),
    array('90000','98100','Sicily','IT'),
    array('1000','1699','Wien','AT'),
    array('2000','3999','Niederösterreich','AT'),
    array('5120','5149','Niederösterreich','AT'),
    array('4000','4999','Oberösterreich','AT'),
    array('5210','5299','Oberösterreich','AT'),
    array('5000','5119','Salzburg','AT'),
    array('5300','5771','Salzburg','AT'),
    array('6000','6699','Tirol','AT'),
    array('6700','6999','Vorarlberg','AT'),
    array('7000','7579','Burgenland','AT'),
    array('8000','8999','Staiermark','AT'),
    array('9000','9999','Kärnten','AT'),
    array('1000','1999','Südwestschweiz','CH'),
    array('2000','2999','Nordwestschweiz','CH'),
    array('3000','3999','Region Bern','CH'),
    array('4000','4999','Region Basel','CH'),
    array('5000','5999','Region Aargau','CH'),
    array('6000','6999','Zentralschweiz/ Tessin','CH'),
    array('7000','7999','Region Graubünden','CH'),
    array('8000','8999','Region Zürich','CH'),
    array('9000','9999','Ostschweiz','CH')
);



foreach($regions as $region) {
    for ($i = intval($region[0]); $i <= intval($region[1]); $i++) {
        $plz = str_pad($i, 5, '0', STR_PAD_LEFT);
        $regions_query->execute(array($plz . '_' . $region[3], $plz, $region[2], $region[3]));
        $inserted++;
    }
}

echo 'Inserted ' . $inserted . " PLZ\n";


$countries = array(
    array('DE', 'Deutschland', '049'),
    array('AT', 'Österreich', '043'),
    array('CH', 'Schweiz', '041'),
    array('BE', 'Belgien', '032'),
    array('IT', 'Italien', '039'),
    array('DK', 'Dänemark', '045'),
    array('FR', 'Frankreich', '033'),
    array('LT', 'Litauen', '0370'),
    array('LV', 'Lettland', '0371'),
    array('EE', 'Estland', '0372'),
    array('LU', 'Luxemburg', '0352'),
    array('NL', 'Niederlande', '031'),
    array('PL', 'Polen', '048'),
    array('SE', 'Schweden', '046'),
    array('FI', 'Finnland', '0358'),
    array('NO', 'Norwegen', '047'),
    array('RU', 'Russland', '007'),
    array('RO', 'Romänien', '040'),
    array('GR', 'Griechenland', '030'),
    array('GB', 'Vereinigtes Königreich', '044'),
    array('ES', 'Spanien', '034'),
    array('SK', 'Slovakei', '0421'),
    array('LI', 'Liechtenstein', '0423'),
    array('CZ', 'Tschechien', '0420'),
    array('BG', 'Bulgarien', '0359'),
    array('US', 'USA', '001')
);

exit("done\n");
